{{ define "main" }}

<section class="hello">
  <h2>Hello!</h2>
  <p>{{ with .Site.Params.hello }}{{ . }}{{ else }}Welcome to my corner of the internet â€” enjoy reading!{{ end }}</p>
</section>

<div class="layout-3col">

  {{ partial "sidebar-categories.html" (dict "ctx" . "mode" "all") }}

  <div>
    {{ $sections := .Site.Params.mainSections | default (slice "posts") }}
    {{ $pages := cond .IsHome (where .Site.RegularPages "Type" "in" $sections) (where .RegularPages "Type" "in" $sections) }}
    {{ $paginator := .Paginate ($pages.ByDate.Reverse) }}
    <section class="blog-list compact">
      {{ range $paginator.Pages }}
        <article class="post-card">
          <a class="post-link" href="{{ .RelPermalink }}" aria-label="{{ .Title }}">
            <div class="post-titlebar">
              <h3 class="post-title">{{ .Title }}</h3>
              <small class="post-date">{{ .Date.Format "Jan 2, 2006" }}</small>
            </div>
            <div class="post-abstract">
              <p>{{ with .Params.abstract }}{{ . }}{{ else }}{{ .Summary }}{{ end }}</p>
            </div>
          </a>
        </article>
      {{ end }}
    </section>

    <div class="pagination">
      {{ template "_internal/pagination.html" . }}
    </div>
  </div>

  {{ partial "right-updates.html" . }}

</div>
{{ end }}
